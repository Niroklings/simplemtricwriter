# Библиотека для сбора и сохранения метрик
## Описание
Библиотека предоставляет простой и эффективный способ сбора и записи метрик в многопоточной среде. Основные возможности:
- Потокобезопасное добавление метрик разных типов

- Асинхронная запись метрик в файл

- Поддержка различных типов данных (целые числа, вещественные числа, строки)

- Автоматическое формирование временных меток

## Требования

- C++11 или новее

- POSIX-совместимая система (для pthread)

## Установка

```bash
git clone https://github.com/Niroklings/simplemtricwriter.git
cd simplemtricwriter
mkdir build && cd build
cmake ..
make
```
## Демонстрация

В папке example находится демонстрационная программа, которая:

- Создает два потока для сбора метрик CPU и HTTP-запросов

- Периодически записывает метрики в файл log.txt

Для запуска демо:

```bash
cd build
./demo
```
## Формат вывода
Метрики записываются в файл в следующем формате:
```text
2025-06-01 15:00:01.653 "CPU" 0.97 "HTTP requests RPS" 42
2025-06-01 15:00:02.653 "CPU" 1.12 "HTTP requests RPS" 30
```
Каждая строка содержит:

- Таймштамп с миллисекундной точностью

- Пары "имя метрики" и значение, разделенные пробелами
## Тестирование

Для запуска тестов:

```bash
cd build
ctest
```


